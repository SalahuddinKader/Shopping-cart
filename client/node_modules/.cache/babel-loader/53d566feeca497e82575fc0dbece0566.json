{"ast":null,"code":"import _regeneratorRuntime from\"/Users/riyadh/Desktop/shopping-cart/Shopping_cart/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/riyadh/Desktop/shopping-cart/Shopping_cart/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/riyadh/Desktop/shopping-cart/Shopping_cart/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/riyadh/Desktop/shopping-cart/Shopping_cart/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/riyadh/Desktop/shopping-cart/Shopping_cart/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import Header from\"./header\";function ResetPassword(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),Reset=_useState2[0],setReset=_useState2[1];//CHECK LOGIN\n// useEffect(() => {\n//   const checkLogin = async () => {\n//     const token = localStorage.getItem(\"tokenStore\");\n//     if (token) {\n//       const verified = await axios.get(\"/users/verify\", {\n//         headers: { Authorization: token },\n//       });\n//       setReset(verified.data);\n//       if (verified.data === false) return localStorage.clear();\n//     } else {\n//       setReset(false);\n//     }\n//   };\n//   checkLogin();\n// }, []);\nvar _useState3=useState({email:\"\"}),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setUser=_useState4[1];var _useState5=useState(\" \"),_useState6=_slicedToArray(_useState5,2),err=_useState6[0],setErr=_useState6[1];var onChangeInput=function onChangeInput(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setUser(_objectSpread(_objectSpread({},user),{},_defineProperty({},name,value)));setErr(\"\");};var loginSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;_context.next=4;return axios.post(\"/users/resetpassword\",{email:user.email});case 4:res=_context.sent;// if (!history.location.pathname.startsWith(\"/login.resetpassword\"))\n//   history.push(\"/login\");\nconsole.log(res);setUser({email:\"\"});_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);_context.t0.response.data.msg&&setErr(_context.t0.response.data.msg);case 12:console.log(err);case 13:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return function loginSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(\"div\",{className:\"Reset Password\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row mt-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 m-auto\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card card-body\"},/*#__PURE__*/React.createElement(\"div\",{className:\" alert-warning alert-dismissible fade show err-btn\"},err),/*#__PURE__*/React.createElement(\"h2\",{className:\"text-center mb-3 \"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-lock-open\"}),\" Reset Password\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:loginSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Email\"),/*#__PURE__*/React.createElement(\"input\",{type:\"email\",id:\"reset-email\",name:\"email\",className:\"form-control\",placeholder:\"Enter Email\",required:true,value:user.email,onChange:onChangeInput})),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary btn-block bg-primary\"},\"Reset Password\",/*#__PURE__*/React.createElement(\"a\",{href:\"/login\"}))))))));}export default ResetPassword;","map":{"version":3,"sources":["/Users/riyadh/Desktop/shopping-cart/Shopping_cart/client/src/component/ResetPassword.jsx"],"names":["React","useState","useEffect","axios","Header","ResetPassword","Reset","setReset","email","user","setUser","err","setErr","onChangeInput","e","target","name","value","loginSubmit","preventDefault","post","res","console","log","response","data","msg"],"mappings":"y2BAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CAEA,QAASC,CAAAA,aAAT,EAAyB,eACGJ,QAAQ,CAAC,KAAD,CADX,wCAChBK,KADgB,eACTC,QADS,eAGvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnBuB,eAoBCN,QAAQ,CAAC,CAC/BO,KAAK,CAAE,EADwB,CAAD,CApBT,yCAoBhBC,IApBgB,eAoBVC,OApBU,8BAwBDT,QAAQ,CAAC,GAAD,CAxBP,yCAwBhBU,GAxBgB,eAwBXC,MAxBW,eA0BvB,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,CAAD,CAAO,eACHA,CAAC,CAACC,MADC,CACnBC,IADmB,WACnBA,IADmB,CACbC,KADa,WACbA,KADa,CAE3BP,OAAO,gCAAMD,IAAN,wBAAaO,IAAb,CAAoBC,KAApB,GAAP,CACAL,MAAM,CAAC,EAAD,CAAN,CACD,CAJD,CAMA,GAAMM,CAAAA,WAAW,0FAAG,iBAAOJ,CAAP,0HAClBA,CAAC,CAACK,cAAF,GADkB,sCAIEhB,CAAAA,KAAK,CAACiB,IAAN,CAAW,sBAAX,CAAmC,CACnDZ,KAAK,CAAEC,IAAI,CAACD,KADuC,CAAnC,CAJF,QAIVa,GAJU,eAOhB;AACA;AAEAC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACAX,OAAO,CAAC,CAAEF,KAAK,CAAE,EAAT,CAAD,CAAP,CAXgB,+EAahB,YAAIgB,QAAJ,CAAaC,IAAb,CAAkBC,GAAlB,EAAyBd,MAAM,CAAC,YAAIY,QAAJ,CAAaC,IAAb,CAAkBC,GAAnB,CAA/B,CAbgB,QAelBJ,OAAO,CAACC,GAAR,CAAYZ,GAAZ,EAfkB,oEAAH,kBAAXO,CAAAA,WAAW,4CAAjB,CAkBA,mBACE,4CACE,oBAAC,MAAD,MADF,cAEE,2BAAK,SAAS,CAAC,gBAAf,eACE,2BAAK,SAAS,CAAC,UAAf,eACE,2BAAK,SAAS,CAAC,iBAAf,eACE,2BAAK,SAAS,CAAC,gBAAf,eACE,2BAAK,SAAS,CAAC,oDAAf,EACGP,GADH,CADF,cAKE,0BAAI,SAAS,CAAC,mBAAd,eACE,yBAAG,SAAS,CAAC,kBAAb,EADF,mBALF,cAQE,4BAAM,QAAQ,CAAEO,WAAhB,eACE,2BAAK,SAAS,CAAC,YAAf,eACE,yCADF,cAEE,6BACE,IAAI,CAAC,OADP,CAEE,EAAE,CAAC,aAFL,CAGE,IAAI,CAAC,OAHP,CAIE,SAAS,CAAC,cAJZ,CAKE,WAAW,CAAC,aALd,CAME,QAAQ,KANV,CAOE,KAAK,CAAET,IAAI,CAACD,KAPd,CAQE,QAAQ,CAAEK,aARZ,EAFF,CADF,cAeE,8BACE,IAAI,CAAC,QADP,CAEE,SAAS,CAAC,sCAFZ,gCAKE,yBAAG,IAAI,CAAC,QAAR,EALF,CAfF,CARF,CADF,CADF,CADF,CAFF,CADF,CA2CD,CAED,cAAeR,CAAAA,aAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport Header from \"./header\";\n\nfunction ResetPassword() {\n  const [Reset, setReset] = useState(false);\n\n  //CHECK LOGIN\n  // useEffect(() => {\n  //   const checkLogin = async () => {\n  //     const token = localStorage.getItem(\"tokenStore\");\n  //     if (token) {\n  //       const verified = await axios.get(\"/users/verify\", {\n  //         headers: { Authorization: token },\n  //       });\n\n  //       setReset(verified.data);\n  //       if (verified.data === false) return localStorage.clear();\n  //     } else {\n  //       setReset(false);\n  //     }\n  //   };\n  //   checkLogin();\n  // }, []);\n  const [user, setUser] = useState({\n    email: \"\",\n  });\n\n  const [err, setErr] = useState(\" \");\n\n  const onChangeInput = (e) => {\n    const { name, value } = e.target;\n    setUser({ ...user, [name]: value });\n    setErr(\"\");\n  };\n\n  const loginSubmit = async (e) => {\n    e.preventDefault();\n\n    try {\n      const res = await axios.post(\"/users/resetpassword\", {\n        email: user.email,\n      });\n      // if (!history.location.pathname.startsWith(\"/login.resetpassword\"))\n      //   history.push(\"/login\");\n\n      console.log(res);\n      setUser({ email: \"\" });\n    } catch (err) {\n      err.response.data.msg && setErr(err.response.data.msg);\n    }\n    console.log(err);\n  };\n\n  return (\n    <div>\n      <Header />\n      <div className=\"Reset Password\">\n        <div className=\"row mt-5\">\n          <div className=\"col-md-6 m-auto\">\n            <div className=\"card card-body\">\n              <div className=\" alert-warning alert-dismissible fade show err-btn\">\n                {err}\n              </div>\n\n              <h2 className=\"text-center mb-3 \">\n                <i className=\"fas fa-lock-open\"></i> Reset Password\n              </h2>\n              <form onSubmit={loginSubmit}>\n                <div className=\"form-group\">\n                  <label>Email</label>\n                  <input\n                    type=\"email\"\n                    id=\"reset-email\"\n                    name=\"email\"\n                    className=\"form-control\"\n                    placeholder=\"Enter Email\"\n                    required\n                    value={user.email}\n                    onChange={onChangeInput}\n                  />\n                </div>\n\n                <button\n                  type=\"submit\"\n                  className=\"btn btn-primary btn-block bg-primary\"\n                >\n                  Reset Password\n                  <a href=\"/login\"></a>\n                </button>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default ResetPassword;\n"]},"metadata":{},"sourceType":"module"}