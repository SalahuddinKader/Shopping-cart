{"ast":null,"code":"import React,{useContext,useEffect}from\"react\";import{DataContext}from\"../context\";import{Link}from\"react-router-dom\";import Colors from\"../section/colors\";import\"../css/Details.css\";import\"../css/Cart.css\";import{toast}from\"react-toastify\";import\"react-toastify/dist/ReactToastify.css\";import StripeCheckout from\"react-stripe-checkout\";toast.configure();var DashCart=function DashCart(){var _useContext=useContext(DataContext),products=_useContext.products,cart=_useContext.cart,handleIncrement=_useContext.handleIncrement,handleDecrement=_useContext.handleDecrement,handleRemove=_useContext.handleRemove,total=_useContext.total,handleTotal=_useContext.handleTotal,removeAll=_useContext.removeAll;var handleToken=function handleToken(token){var body={token:token,products:products,total:total};var headers={\"Content-Type\":\"application/json\"};return fetch(\"http://localhost:5000/payment\",{method:\"POST\",headers:headers,body:JSON.stringify(body)}).then(function(response){toast(\" Success! Check email for details\",{type:\"success\"});removeAll();console.log(response);}).catch(function(){toast(\"Something went wrong\",{type:\"error\"});});};//Pay With Card HandleToken\n//Added to Total in the cart\nuseEffect(function(){handleTotal();},[]);//Without product showing empty cart\nif(cart.length===0){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h2\",{style:{textAlign:\"center\"}},\"Your Cart is Currently Empty\"),\" \");}else{return/*#__PURE__*/React.createElement(\"div\",null,cart.map(function(item){return/*#__PURE__*/React.createElement(\"div\",{className:\"details cart\",key:item._id},/*#__PURE__*/React.createElement(\"img\",{className:\"cart-img\",src:item.src,alt:\"\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"box\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"h2\",null,item.title),/*#__PURE__*/React.createElement(\"span\",null,\"\\xA3\",item.price*item.count)),/*#__PURE__*/React.createElement(Colors,{colors:item}),/*#__PURE__*/React.createElement(\"p\",null,item.description),/*#__PURE__*/React.createElement(\"p\",null,item.content),/*#__PURE__*/React.createElement(\"div\",{className:\"amount\"},/*#__PURE__*/React.createElement(\"button\",{className:\"count\",onClick:function onClick(){return handleDecrement(item._id);}},\"-\"),/*#__PURE__*/React.createElement(\"span\",null,item.count),/*#__PURE__*/React.createElement(\"button\",{className:\"count\",onClick:function onClick(){return handleIncrement(item._id);}},\"+\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"delete\",onClick:function onClick(){return handleRemove(item._id);}},\"Remove\"));}),/*#__PURE__*/React.createElement(\"div\",{className:\"total-checkout\"},/*#__PURE__*/React.createElement(\"h3\",null,\"Total: \\xA3\",total)),/*#__PURE__*/React.createElement(\"div\",{className:\"total\"},/*#__PURE__*/React.createElement(\"div\",{className:\"total\"},/*#__PURE__*/React.createElement(Link,{to:\"/products\",style:{background:\"crimson\"}},\"Continue Shopping\")),/*#__PURE__*/React.createElement(StripeCheckout,{stripeKey:\"pk_test_51HAlmnIfOyLdLwzAz2piAWlcCJcAPATSEkCyxcUG7m1F80xXqr4wd8FoFWqYEfXUUEEgDGBx5G9aXG4IenAw46fh00x1Qgnr7v\",token:handleToken,name:\"NIKE\",billingAddress:true,shippingAddress:true},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary btn-lg\"},\"Checkout\"))));}};export default DashCart;","map":{"version":3,"sources":["/Users/riyadh/Desktop/shopping-cart/Shopping_cart/client/src/component/backDash/DashCart.jsx"],"names":["React","useContext","useEffect","DataContext","Link","Colors","toast","StripeCheckout","configure","DashCart","products","cart","handleIncrement","handleDecrement","handleRemove","total","handleTotal","removeAll","handleToken","token","body","headers","fetch","method","JSON","stringify","then","response","type","console","log","catch","length","textAlign","map","item","_id","src","title","price","count","description","content","background"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect } from \"react\";\nimport { DataContext } from \"../context\";\nimport { Link } from \"react-router-dom\";\nimport Colors from \"../section/colors\";\nimport \"../css/Details.css\";\nimport \"../css/Cart.css\";\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport StripeCheckout from \"react-stripe-checkout\";\ntoast.configure();\n\nconst DashCart = () => {\n  const {\n    products,\n    cart,\n    handleIncrement,\n    handleDecrement,\n    handleRemove,\n    total,\n    handleTotal,\n    removeAll,\n  } = useContext(DataContext);\n\n  const handleToken = (token) => {\n    const body = {\n      token,\n      products,\n      total,\n    };\n\n    const headers = {\n      \"Content-Type\": \"application/json\",\n    };\n    return fetch(`http://localhost:5000/payment`, {\n      method: \"POST\",\n      headers,\n      body: JSON.stringify(body),\n    })\n      .then((response) => {\n        toast(\" Success! Check email for details\", { type: \"success\" });\n\n        removeAll();\n\n        console.log(response);\n      })\n      .catch(() => {\n        toast(\"Something went wrong\", { type: \"error\" });\n      });\n  };\n\n  //Pay With Card HandleToken\n\n  //Added to Total in the cart\n  useEffect(() => {\n    handleTotal();\n  }, []);\n\n  //Without product showing empty cart\n  if (cart.length === 0) {\n    return (\n      <div>\n        <h2 style={{ textAlign: \"center\" }}>Your Cart is Currently Empty</h2>{\" \"}\n      </div>\n    );\n  } else {\n    return (\n      <div>\n        {cart.map((item) => (\n          <div className=\"details cart\" key={item._id}>\n            <img className=\"cart-img\" src={item.src} alt=\"\" />\n            <div className=\"box\">\n              <div className=\"row\">\n                <h2>{item.title}</h2>\n                <span>£{item.price * item.count}</span>\n              </div>\n\n              <Colors colors={item} />\n\n              <p>{item.description}</p>\n              <p>{item.content}</p>\n              <div className=\"amount\">\n                <button\n                  className=\"count\"\n                  onClick={() => handleDecrement(item._id)}\n                >\n                  -\n                </button>\n                <span>{item.count}</span>\n                <button\n                  className=\"count\"\n                  onClick={() => handleIncrement(item._id)}\n                >\n                  +\n                </button>\n              </div>\n            </div>\n\n            <div className=\"delete\" onClick={() => handleRemove(item._id)}>\n              Remove\n            </div>\n          </div>\n        ))}\n        <div className=\"total-checkout\">\n          <h3>Total: £{total}</h3>\n        </div>\n\n        <div className=\"total\">\n          <div className=\"total\">\n            <Link to=\"/products\" style={{ background: \"crimson\" }}>\n              Continue Shopping\n            </Link>\n          </div>\n          <StripeCheckout\n            stripeKey=\"pk_test_51HAlmnIfOyLdLwzAz2piAWlcCJcAPATSEkCyxcUG7m1F80xXqr4wd8FoFWqYEfXUUEEgDGBx5G9aXG4IenAw46fh00x1Qgnr7v\"\n            token={handleToken}\n            name=\"NIKE\"\n            billingAddress\n            shippingAddress\n          >\n            <button className=\"btn btn-primary btn-lg\">Checkout</button>\n          </StripeCheckout>\n        </div>\n      </div>\n    );\n  }\n};\n\nexport default DashCart;\n"]},"metadata":{},"sourceType":"module"}